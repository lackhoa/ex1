name: main

on:
  push:
    branches: ['**']

jobs:
  # one:
  #   name: one
  #   uses: ./.github/workflows/one.yaml
  # two:
  #   name: two
  #   uses: ./.github/workflows/two.yaml
  main:
    runs-on: ubuntu-latest
    steps:

    - name: Cache go bin
      id: cache-go-bin
      uses: actions/cache@v3
      with:
        path: ~/go/bin
        key: ${{ runner.os }}

    - uses: actions/setup-go@v3
      if: steps.cache-go-bin.outputs.cache-hit != 'true'

    - name: Install aws-amicleaner
      if: steps.cache-go-bin.outputs.cache-hit != 'true'
      run: go get github.com/trussworks/truss-aws-tools/...

    - name: ls
      run: ls ~/go/bin
